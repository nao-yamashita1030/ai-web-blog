# 運用計画書

## 1. デプロイ計画

### 1.1 デプロイ環境
- **本番環境**: Vercel（mainブランチ）
- **プレビュー環境**: Vercel（各ブランチ・プルリクエスト）
- **開発環境**: ローカル環境

### 1.2 デプロイ手順
1. コードをGitにコミット・プッシュ
2. Vercelが自動的にビルド・デプロイ
3. デプロイ完了を確認
4. 動作確認を実施

### 1.3 デプロイスケジュール
- **通常デプロイ**: 随時（Gitにプッシュした時点で自動デプロイ）
- **緊急デプロイ**: 必要に応じて実施

### 1.4 ロールバック計画
- Vercelのデプロイ履歴から前のバージョンにロールバック可能
- 必要に応じてGitのタグを使用してバージョン管理

### 1.5 デプロイチェックリスト
- [ ] テストがすべて通過している
- [ ] 環境変数が正しく設定されている
- [ ] ビルドが正常に完了する
- [ ] 動作確認が完了している

## 2. 監視・運用体制

### 2.1 監視項目
- **パフォーマンス**: ページ読み込み速度、Core Web Vitals
- **エラー**: ビルドエラー、実行時エラー
- **可用性**: サイトの稼働状況
- **トラフィック**: アクセス数、ページビュー

### 2.2 監視ツール
- **Vercel Analytics**: パフォーマンス監視
- **Vercel Logs**: エラーログ監視
- **Google Analytics**: アクセス解析（オプション）

### 2.3 アラート設定
- ビルドエラー時に通知
- 重大なエラー発生時に通知（必要に応じて）

### 2.4 運用体制
- 開発者が運用を担当
- 必要に応じて外部リソースを活用

### 2.5 オンコール体制
- 個人運用のため、オンコール体制は設定しない
- 重大な問題が発生した場合は対応

### 2.6 運用マニュアル
- この運用計画書を運用マニュアルとして使用

## 3. バックアップ・リカバリ

### 3.1 バックアップ方針
- **コンテンツ**: microCMSのバックアップ機能に依存
- **コード**: Gitリポジトリで管理

### 3.2 バックアップ対象
- **コンテンツデータ**: microCMSで管理
- **コード**: Gitリポジトリ

### 3.3 バックアップスケジュール
- **コンテンツ**: microCMSの自動バックアップに依存
- **コード**: Gitにコミットすることで自動的にバックアップ

### 3.4 バックアップ保持期間
- **コンテンツ**: microCMSの設定に依存
- **コード**: Gitの履歴として永続的に保持

### 3.5 リカバリ手順
- **コンテンツ復旧**: microCMSの機能を利用
- **コード復旧**: Gitから復元

### 3.6 リカバリテスト計画
- 定期的にリカバリ手順を確認
- 必要に応じてリカバリテストを実施

## 4. 障害対応手順

### 4.1 障害レベル定義
- **レベル1（緊急）**: サイトが完全にダウン
- **レベル2（高）**: 主要機能が動作しない
- **レベル3（中）**: 一部機能が動作しない
- **レベル4（低）**: 軽微な問題

### 4.2 障害検知方法
- Vercelの監視機能
- ユーザーからの報告
- 手動での動作確認

### 4.3 障害対応フロー
1. 障害を検知
2. 障害の影響範囲を確認
3. 原因を調査
4. 対応を実施
5. 復旧を確認
6. 再発防止策を検討

### 4.4 エスカレーション基準
- レベル1、レベル2の障害は即座に対応
- レベル3、レベル4の障害は可能な範囲で対応

### 4.5 障害対応マニュアル
- この運用計画書の障害対応手順を参照

### 4.6 インシデント管理
- GitHubのIssueでインシデントを管理
- インシデントの記録を残す

## 5. 保守計画

### 5.1 保守方針
- 定期的なメンテナンスを実施
- セキュリティパッチを適切に適用
- 依存関係を定期的に更新

### 5.2 定期メンテナンス
- **週次**: 動作確認
- **月次**: 依存関係の更新確認
- **四半期**: セキュリティ監査

### 5.3 セキュリティパッチ適用
- セキュリティパッチが公開されたら速やかに適用
- 依存関係の脆弱性を定期的に確認

### 5.4 バージョンアップ計画
- Next.jsのバージョンアップを定期的に実施
- 依存関係のバージョンアップを定期的に実施

### 5.5 保守体制
- 開発者が保守を担当

## 6. ログ管理

### 6.1 ログ収集方針
- Vercelのログ機能を活用
- 必要に応じて追加のログ収集ツールを導入

### 6.2 ログ保持期間
- Vercelのログ保持期間に依存
- 必要に応じてログをエクスポートして保存

### 6.3 ログ分析
- Vercelのログ機能で確認
- 必要に応じてログ分析ツールを導入

### 6.4 ログアーカイブ
- 必要に応じてログをアーカイブ

## 7. セキュリティ運用

### 7.1 セキュリティ監視
- 定期的にセキュリティスキャンを実施
- 脆弱性情報を確認

### 7.2 脆弱性管理
- 脆弱性が発見されたら速やかに対応
- GitHubのDependabotを活用

### 7.3 アクセス管理
- APIキーを環境変数で管理
- アクセス権限を適切に設定

### 7.4 セキュリティインシデント対応
- セキュリティインシデントが発生したら即座に対応
- 必要に応じて専門家に相談

## 8. パフォーマンス管理

### 8.1 パフォーマンス監視
- Vercel Analyticsでパフォーマンスを監視
- Core Web Vitalsを定期的に確認

### 8.2 パフォーマンスチューニング
- パフォーマンスが低下したら原因を調査
- 必要に応じて最適化を実施

### 8.3 キャパシティプランニング
- トラフィックの増加に応じてスケール
- Vercelの自動スケーリング機能を活用

## 9. ドキュメント管理

### 9.1 運用ドキュメント
- この運用計画書
- READMEファイル
- APIドキュメント

### 9.2 ドキュメント更新方針
- 変更があったらドキュメントを更新
- 定期的にドキュメントを確認

### 9.3 ナレッジ管理
- GitHubのWikiやIssueでナレッジを管理
- 重要な情報はドキュメントに記録

## 10. コスト管理

### 10.1 運用コスト
- **Vercel**: 無料プランで開始（必要に応じて有料プランへ移行）
- **microCMS**: 無料プランまたは有料プラン
- **その他**: ドメイン費用等

### 10.2 コスト最適化
- 無料プランの範囲内で運用
- 必要に応じて有料プランへ移行

### 10.3 予算管理
- 月次のコストを確認
- 予算を超えないように管理




